FROM bluecatr/mosquitto

ARG MOSQUITTO_AUTH_VERSION
ARG MOSQUITTO_AUTH_BACKEND_CDB
ARG MOSQUITTO_AUTH_BACKEND_CDB
ARG MOSQUITTO_AUTH_BACKEND_MYSQL
ARG MOSQUITTO_AUTH_BACKEND_SQLITE
ARG MOSQUITTO_AUTH_BACKEND_REDIS
ARG MOSQUITTO_AUTH_BACKEND_POSTGRES
ARG MOSQUITTO_AUTH_BACKEND_LDAP
ARG MOSQUITTO_AUTH_BACKEND_HTTP
ARG MOSQUITTO_AUTH_BACKEND_MONGO

ENV MOSQUITTO_AUTH_VERSION=${MOSQUITTO_AUTH_VERSION:-0.1.3} \
    MOSQUITTO_AUTH_BACKEND_MYSQL=${MOSQUITTO_AUTH_BACKEND_MYSQL:-yes}

ADD build.sh /tmp/build.sh

RUN chmod +x /tmp/build.sh \
   && /tmp/build.sh
